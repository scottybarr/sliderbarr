(function(){var t,e=function(t,e){return function(){return t.apply(e,arguments)}};t=function(){"use strict";function t(t){this._getValFromMouseEvent=e(this._getValFromMouseEvent,this),this._onMouseup=e(this._onMouseup,this),this._onSliderClick=e(this._onSliderClick,this),this._onHandleMousemove=e(this._onHandleMousemove,this),this._onHandleMousedown=e(this._onHandleMousedown,this),this._onHandleKeydown=e(this._onHandleKeydown,this);var s;this._settings={el:null,max:100,min:0,value:25,bar:!0,labels:!1,step:1,onChange:null,onDrag:null},this._activeDrag=!1,this._cache={};for(s in this._settings)t.hasOwnProperty(s)&&(this._settings[s]=t[s]);this._settings.el=this._getSliderElement(),this._validateHandles(),this._render(),this._settings.labels&&this._renderEdgeLabels(),this._initSelectors(),this._initEvents(),this._renderHandleChanges()}return t.prototype._getSliderElement=function(){return"[object String]"===toString.call(this._settings.el)?document.getElementById(this._settings.el):this._settings.el.get(0)},t.prototype._initSelectors=function(){return this._cache={slider:this._settings.el,bar:this._settings.bar?this._settings.el.getElementsByClassName("bar")[0]:void 0,handle:this._settings.el.getElementsByClassName("handle"),current:this._settings.labels?this._settings.el.getElementsByClassName("current")[0]:void 0,width:this._settings.el.offsetWidth}},t.prototype._initEvents=function(){var t,e,s,n;for(n=this._cache.handle,e=0,s=n.length;s>e;e++)t=n[e],t.addEventListener("keydown",this._onHandleKeydown),t.addEventListener("mousedown",this._onHandleMousedown);return this._cache.slider.addEventListener("click",this._onSliderClick),document.addEventListener("mouseup",this._onMouseup)},t.prototype._changeHandle=function(t){return this._settings.value=this._settings.value+("r"===t?this._settings.step:-this._settings.step),this._validateHandles(),this._renderHandleChanges(),this._fireOnChange()},t.prototype._validateHandles=function(){return 1!==this._settings.step&&(this._settings.value=Math.round(this._settings.value/this._settings.step)*this._settings.step),this._settings.value=this._validateValue(this._settings.value),this._settings.value>this._settings.max&&(this._settings.value=this._settings.max),this._settings.value<this._settings.min?this._settings.value=this._settings.min:void 0},t.prototype._render=function(){return this._settings.labels&&(this._settings.el.innerHTML+='<span class="label min"></span>\n<span class="label current"></span>\n<span class="label max"></span>\''),this._settings.bar&&(this._settings.el.innerHTML+='<div class="bar"></div>'),this._settings.el.innerHTML+='<a href="#" class="handle"></a>'},t.prototype._renderEdgeLabels=function(){return this._settings.el.getElementsByClassName("min")[0].innerHTML=this._settings.min,this._settings.el.getElementsByClassName("max")[0].innerHTML=this._settings.max},t.prototype._renderHandleChanges=function(){var t,e,s,n;for(n=this._cache.handle,e=0,s=n.length;s>e;e++)t=n[e],t.style.left=""+this._settings.value+"%";return this._settings.bar&&(this._cache.bar.style.width=""+this._settings.value+"%"),this._settings.labels?this._cache.current.innerHTML=this._settings.value:void 0},t.prototype._onHandleKeydown=function(t){var e,s;return 37===(e=t.keyCode)||38===e||39===e||40===e||65===e||68===e||83===e||87===e?this._changeHandle(37===(s=t.keyCode)||40===s||65===s||83===s?"l":"r"):void 0},t.prototype._onHandleMousedown=function(){return this._activeDrag=!0,document.addEventListener("mousemove",this._onHandleMousemove),!1},t.prototype._onHandleMousemove=function(t){return this._activeDrag?this._setSliderValueOnDrag(t):void 0},t.prototype._onSliderClick=function(t){return this._settings.value=this._getValFromMouseEvent(t),this._validateHandles(),this._renderHandleChanges(),this._fireOnChange(),this._cache.handle[0].focus(),!1},t.prototype._onMouseup=function(t){return this._activeDrag&&(this._setSliderValueOnDrag(t),this._fireOnChange(),this._cache.handle[0].focus()),this._activeDrag=!1,this},t.prototype._fireOnChange=function(){return null!=this._settings.onChange?this._settings.onChange(this._settings.value):void 0},t.prototype._getValFromMouseEvent=function(t){return this._validateValue(100*((t.pageX-this._cache.slider.offsetLeft)/this._cache.width))},t.prototype._setSliderValueOnDrag=function(t){return this._settings.value=this._getValFromMouseEvent(t),this._validateHandles(),null!=this._settings.onDrag&&this._settings.onDrag(this._settings.value),this._renderHandleChanges()},t.prototype._validateValue=function(t){var e,s,n;return 0===this._settings.step%1?parseInt(t,10):(n=(this._settings.step+"").split("."),e=n[0],s=n[1],parseFloat(t.toFixed(s.length)))},t.prototype.getValue=function(){return this._settings.value},t.prototype.setValue=function(t,e){return null==e&&(e=!0),this._settings.value=t,this._validateHandles(),this._renderHandleChanges(),e?this._fireOnChange():void 0},t}(),"function"==typeof define&&define.amd?define("SliderBarr",[],function(){return t}):window.SliderBarr=t}).call(this);